!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("rxjs/Subject")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","rxjs/Subject"],t):t(e["amazing-time-picker"]={},e.ng.core,e.ng.common,e.Rx)}(this,function(e,t,r,i){"use strict";var n=function(){function e(){}return e.prototype.allowedTimes=function(e,t){for(var r=[],i=+e.split(":")[0],n=+t.split(":")[0],o=+e.split(":")[1],c=+t.split(":")[1],p=i;p<=n;p++){var a=0,s=59;for(p===i?a=o:p===n&&(s=c);a<=s;a++){var m=p<=12?p:p-12,l=a,u=p<12?"AM":"PM";r.push(m+":"+l+" "+u)}}return r},e.prototype.ClockMaker=function(e){for(var t=[],r="minute"===e?60:12,i="minute"===e?5:1,n="minute"===e?0:1;n<=r;n+=i)if(60!==n){var o=String(n),c=99*Math.sin(2*Math.PI*(n/r)),p=99*Math.cos(2*Math.PI*(n/r));t.push({time:o,left:c+124-17+"px",top:124-p-17+"px",type:e})}return t},e.prototype.TimeToString=function(e){var t=e.ampm,r=e.minute,i=e.hour,n="PM"===t?+i+12:+i;"AM"===t&&12===n&&(n=0),24===n&&(n=12);return(n=n<10?"0"+n:""+n)+":"+(r<10?"0"+r:r)},e.prototype.StringToTime=function(e){var t=e.split(":"),r=t[0],i=t[1],n=+r>12?+r-12:+r;n=0===n?12:n;return{ampm:+r>=12?"PM":"AM",minute:+i,hour:n}},e.prototype.CalcDegrees=function(e,t,r){var i=e.currentTarget.offsetWidth/2,n=e.currentTarget.offsetHeight/2,o=Math.round(e.clientX-t.left-i),c=Math.round(n-(e.clientY-t.top)),p=-Math.atan2(c,o);p+=2.5*Math.PI;var a=Math.round(180*p/Math.PI),s=a%r;if(0!==s)return s>=r/2?a+=r-s:s<r/2&&(a-=s),a},e}();n.decorators=[{type:t.Injectable}],n.ctorParameters=function(){return[]};var o=function(){function e(e){var t=this;this.core=e,this.subject=null,this.activeModal=!1,this.clockType="hour",this.time={ampm:"AM",minute:0,hour:12},this.nowTime=this.time.hour,this.isPopup=!0,this.clockMaker=function(){var e=t.clockType;t.clockObject=t.core.ClockMaker(e),t.setArrow(null)},this.setActiveTime=function(){t.nowTime="minute"===t.clockType?t.time.minute:t.time.hour},this.setArrow=function(e){e&&(t.clockType=e.type,"minute"===t.clockType?t.time.minute=e.time:t.time.hour=e.time);var r="minute"===t.clockType?6:30,i=("minute"===t.clockType?t.time.minute:t.time.hour)*r;t.rotationClass(i),t.setActiveTime()},this.rotationClass=function(e){t.degree=e},this.getDegree=function(e){var r="minute"===t.clockType?6:30,i=e.currentTarget.getBoundingClientRect();if(t.isClicked&&(e.currentTarget===e.target||"BUTTON"===e.target.nodeName)){e.currentTarget.offsetWidth,e.currentTarget.offsetHeight;var n=t.core.CalcDegrees(e,i,r),o=t.time.hour,c=t.time.minute;"hour"===t.clockType?o=(o=n/r)>12?o-12:o:"minute"===t.clockType&&(c=(c=n/r)>59?c-60:c);var p=t.config.rangeTime.start,a=t.config.rangeTime.end,s=+p.split(":")[0]<12?+p.split(":")[0]:+p.split(":")[0]-12,m=+a.split(":")[0]<12?+a.split(":")[0]:+a.split(":")[0]-12,l=+p.split(":")[1],u=+a.split(":")[1],k=t.GetNowTime(o,t.time.ampm,c);t.allowed.indexOf(k)>-1?(t.time.hour=o,t.time.minute=c,t.rotationClass(n),t.setActiveTime()):"hour"===t.clockType&&o===s&&c<=l?(t.time.hour=s,t.time.minute=l):"hour"===t.clockType&&o===m&&c>=u&&(t.time.hour=m,t.time.minute=u)}}}return e.prototype.ParseStringToTime=function(e){e=""===e||e===undefined||null===e?this.time.hour+":"+this.time.minute:e,this.time=this.core.StringToTime(e)},e.prototype.GetTime=function(){var e=this.core.TimeToString(this.time);this.subject.next(e)},e.prototype.GetNowTime=function(e,t,r){return(12===e&&"AM"===t?"0":e)+":"+r+" "+t},e.prototype.checkBet=function(){var e=this.GetNowTime(this.time.hour,this.time.ampm,this.time.minute);-1===this.allowed.indexOf(e)&&(this.ParseStringToTime(this.config.rangeTime.start),this.setArrow(null),this.setActiveTime())},e.prototype.modalAnimation=function(){var e=this;setTimeout(function(){e.activeModal=!0},1)},e.prototype.ngOnInit=function(){this.allowed=this.core.allowedTimes(this.config.rangeTime.start,this.config.rangeTime.end),this.clockMaker(),this.modalAnimation()},e.prototype.Close=function(e){var t=this;e.target===e.currentTarget&&!0===this.isPopup&&(this.activeModal=!1,setTimeout(function(){t.appRef.detachView(t._ref.hostView),t._ref.destroy()},400))},e.prototype.GetSeparator=function(){return this.preference&&this.preference.separator?this.preference.separator:":"},e.prototype.GetPeriod=function(e){return this.preference&&this.preference.period?this.preference.period(e):e},e.prototype.GetMinute=function(){if(this.preference&&this.preference.minute)return this.preference.minute(this.time.minute);var e=this.time.minute.toString();return+e<10&&(e="0"+e),e},e.prototype.GetHour=function(){return this.preference&&this.preference.hour?this.preference.hour(this.time.hour):this.time.hour},e.prototype.GetClockTime=function(e){return this.preference?"hour"===this.clockType&&this.preference.clockHour?this.preference.clockHour(e.time):"minute"===this.clockType&&this.preference.clockMinute?this.preference.clockMinute(e.time):e.time:e.time},e.prototype.GetLabel=function(e){var t={ok:"Ok",cancel:"Cancel"};return this.preference&&this.preference.labels&&this.preference.labels.ok&&(t.ok=this.preference.labels.ok),this.preference&&this.preference.labels&&this.preference.labels.cancel&&(t.cancel=this.preference.labels.cancel),t[e]},e}();o.decorators=[{type:t.Component,args:[{selector:"time-picker",template:'\n    <div id="time-picker-wrapper" class="{{config.theme}}" [ngClass]="{\'active\': activeModal, \'static\': !isPopup}" (click)="Close($event);">\n      <div id="time-picker" [ngClass]="{\'active\': activeModal, \'static\': !isPopup}">\n        <div class="time-picker-header">\n          <div class="time-picker-selected-time">\n              <div class="time-picker-hour" (click)="clockType=\'hour\';clockMaker()" \n                [ngClass]="{\'selected\' : clockType == \'hour\'}">{{GetHour()}}</div>\n              <span class="time-seprator">{{GetSeparator()}}</span>\n              <div class="time-picker-minute" (click)="clockType=\'minute\';clockMaker()" \n                [ngClass]="{\'selected\' : clockType == \'minute\'}">{{GetMinute()}}</div>\n          </div>\n          <div class="time-picker-selected-ampm">\n            <div class="time-picker-am" (click)="time.ampm = \'AM\'; checkBet();" [ngClass]="{\'selected\' : time.ampm == \'AM\'}">{{GetPeriod(\'AM\')}}</div>\n            <div class="time-picker-pm" (click)="time.ampm = \'PM\'; checkBet();" [ngClass]="{\'selected\' : time.ampm == \'PM\'}">{{GetPeriod(\'PM\')}}</div>\n\n          </div>\n        </div>\n        <div class="time-picker-content">\n            <div class="time-picker-clock" (mousemove)="getDegree($event);" (mousedown)="isClicked = true;getDegree($event);" (mouseup)="isClicked = false;">\n              <button *ngFor="let clock of clockObject" [ngClass]="{\'active\' : nowTime == clock.time}" \n                [id]="\'timepicker-item-id-\' + clock.time" \n                [ngStyle]="{top: clock.top,left: clock.left, color: nowTime == clock.time ? config.arrowStyle.color : config.theme == \'light\' ? \'#000\' : \'#eee\', background: nowTime == clock.time ? config.arrowStyle.background : \'transparent\'}">\n                {{GetClockTime(clock)}}\n              </button>\n              <div class="time-picker-clock-origin" [ngStyle]="{ background: config.arrowStyle.background}"></div>\n              <div id="tpc-arrow" class="time-picker-clock-arrow" [ngStyle]="{transform: \'rotate(\' + this.degree + \'deg)\',\'-webkit-transform\': \'rotate(\' + this.degree + \'deg)\', background: config.arrowStyle.background}">\n                <span [ngStyle]="{ background: config.arrowStyle.background }"></span>\n              </div>\n            </div>\n        </div>\n        <div class="time-picker-footer">\n            <button (click)="Close($event);">{{GetLabel(\'cancel\')}}</button>\n            <button (click)="GetTime();Close($event);" class="atp-ref-dialog-close">{{GetLabel(\'ok\')}}</button>\n        </div>\n      </div>\n    </div>\n  ',styles:["\n    #time-picker-wrapper {\n      position: fixed;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      background: transparent;\n      -webkit-transition: background 0.4s;\n      transition: background 0.4s;\n      font-family: 'Roboto', sans-serif;\n      z-index: 1000; }\n      #time-picker-wrapper.static {\n        position: relative !important;\n        background: transparent !important;\n        display: inline-block;\n        z-index: 0; }\n      #time-picker-wrapper.active {\n        background: rgba(0, 0, 0, 0.3); }\n      #time-picker-wrapper.dark #time-picker {\n        background: #424242; }\n        #time-picker-wrapper.dark #time-picker .time-picker-header {\n          border-bottom: none;\n          background: #555555; }\n          #time-picker-wrapper.dark #time-picker .time-picker-header .time-picker-selected-time {\n            color: #999; }\n            #time-picker-wrapper.dark #time-picker .time-picker-header .time-picker-selected-time div.selected {\n              color: #fff; }\n          #time-picker-wrapper.dark #time-picker .time-picker-header .time-picker-selected-ampm {\n            color: #999; }\n            #time-picker-wrapper.dark #time-picker .time-picker-header .time-picker-selected-ampm div.selected {\n              color: #fff; }\n        #time-picker-wrapper.dark #time-picker .time-picker-clock {\n          background: #555555; }\n        #time-picker-wrapper.dark #time-picker .time-picker-footer {\n          border-top: none; }\n          #time-picker-wrapper.dark #time-picker .time-picker-footer button {\n            background: #555555;\n            color: #fff; }\n            #time-picker-wrapper.dark #time-picker .time-picker-footer button:hover {\n              background: #777; }\n      #time-picker-wrapper.light #time-picker {\n        background: #fff; }\n        #time-picker-wrapper.light #time-picker .time-picker-header {\n          border-bottom: 1px solid #e1e1e1; }\n          #time-picker-wrapper.light #time-picker .time-picker-header .time-picker-selected-time {\n            color: #aaa; }\n            #time-picker-wrapper.light #time-picker .time-picker-header .time-picker-selected-time div.selected {\n              color: #000; }\n          #time-picker-wrapper.light #time-picker .time-picker-header .time-picker-selected-ampm {\n            color: #aaa; }\n            #time-picker-wrapper.light #time-picker .time-picker-header .time-picker-selected-ampm div.selected {\n              color: #000; }\n        #time-picker-wrapper.light #time-picker .time-picker-clock {\n          background: #ededed; }\n        #time-picker-wrapper.light #time-picker .time-picker-footer {\n          border-top: 1px solid #e1e1e1; }\n          #time-picker-wrapper.light #time-picker .time-picker-footer button {\n            background: #f1f1f1; }\n            #time-picker-wrapper.light #time-picker .time-picker-footer button:hover {\n              background: #ddd; }\n      #time-picker-wrapper #time-picker {\n        width: 325px;\n        height: auto;\n        -webkit-box-shadow: 0 11px 15px -7px rgba(0, 0, 0, 0.2), 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12);\n                box-shadow: 0 11px 15px -7px rgba(0, 0, 0, 0.2), 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12);\n        border-radius: 2px;\n        margin: 15vh auto !important;\n        -webkit-transform: scale(0.5) !important;\n                transform: scale(0.5) !important;\n        -webkit-transition: opacity 0.3s, -webkit-transform 0.3s;\n        transition: opacity 0.3s, -webkit-transform 0.3s;\n        transition: transform 0.3s, opacity 0.3s;\n        transition: transform 0.3s, opacity 0.3s, -webkit-transform 0.3s;\n        opacity: 0; }\n        #time-picker-wrapper #time-picker.static {\n          margin: 0px !important;\n          -webkit-box-shadow: 0 11px 15px -7px rgba(0, 0, 0, 0.2), 0 0 7px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12);\n                  box-shadow: 0 11px 15px -7px rgba(0, 0, 0, 0.2), 0 0 7px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12); }\n        #time-picker-wrapper #time-picker.active {\n          -webkit-transform: scale(1) !important;\n                  transform: scale(1) !important;\n          opacity: 1; }\n        #time-picker-wrapper #time-picker .time-picker-header {\n          text-align: center;\n          padding: 15px 0px; }\n          #time-picker-wrapper #time-picker .time-picker-header .time-picker-selected-time {\n            font-size: 35px;\n            padding: 5px 0px; }\n            #time-picker-wrapper #time-picker .time-picker-header .time-picker-selected-time div {\n              display: inline-block;\n              cursor: pointer; }\n          #time-picker-wrapper #time-picker .time-picker-header .time-picker-selected-ampm {\n            font-size: 18px; }\n            #time-picker-wrapper #time-picker .time-picker-header .time-picker-selected-ampm div {\n              display: inline-block;\n              padding: 0 5px;\n              cursor: pointer; }\n        #time-picker-wrapper #time-picker .time-picker-content .time-picker-clock {\n          width: 200px;\n          height: 200px;\n          padding: 24px;\n          border-radius: 50%;\n          cursor: pointer;\n          margin: 25px auto;\n          position: relative;\n          user-select: none;\n          -moz-user-select: none;\n          -ms-user-select: none;\n          -webkit-user-select: none; }\n          #time-picker-wrapper #time-picker .time-picker-content .time-picker-clock button {\n            border: none;\n            background: transparent;\n            position: absolute;\n            width: 35px;\n            height: 35px;\n            border-radius: 50%;\n            cursor: pointer;\n            font-size: 17px;\n            text-align: center;\n            padding: 0;\n            -webkit-transition: all .2s;\n            transition: all .2s;\n            z-index: 3; }\n            #time-picker-wrapper #time-picker .time-picker-content .time-picker-clock button:hover {\n              background: #fafafa; }\n            #time-picker-wrapper #time-picker .time-picker-content .time-picker-clock button.active {\n              background: blue;\n              color: #fff; }\n          #time-picker-wrapper #time-picker .time-picker-content .time-picker-clock .time-picker-clock-origin {\n            width: 6px;\n            height: 6px;\n            border-radius: 50%;\n            position: absolute;\n            left: 50%;\n            top: 50%;\n            margin-left: -3px;\n            margin-top: -3px; }\n          #time-picker-wrapper #time-picker .time-picker-content .time-picker-clock .time-picker-clock-arrow {\n            width: 2px;\n            height: 41%;\n            background: blue;\n            position: absolute;\n            left: 0;\n            top: 22px;\n            right: 0;\n            margin: auto;\n            -webkit-transform-origin: top left;\n            transform-origin: bottom; }\n            #time-picker-wrapper #time-picker .time-picker-content .time-picker-clock .time-picker-clock-arrow span {\n              width: 8px;\n              height: 8px;\n              border-radius: 50%;\n              position: absolute;\n              top: 0;\n              right: -3px; }\n        #time-picker-wrapper #time-picker .time-picker-footer {\n          padding: 15px;\n          text-align: right; }\n          #time-picker-wrapper #time-picker .time-picker-footer button {\n            border: transparent;\n            margin-left: 10px;\n            padding: 10px;\n            font-size: 14px;\n            border-radius: 2px;\n            cursor: pointer; }\n\n    * {\n      outline: none;\n      -webkit-box-sizing: content-box;\n              box-sizing: content-box; }\n  "]}]}],o.ctorParameters=function(){return[{type:n}]};var c=function(){function e(e,r){this.resolver=e,this.appRef=r,this.timeSelected=new t.EventEmitter,this.config={}}return e.prototype.ngOnInit=function(){var e=this,t=this.config;(t={time:t.time||"00:00",theme:["light","dark"].indexOf(t.theme)>0?t.theme:"light",rangeTime:t.rangeTime||{start:"0:0",end:"24:0"},arrowStyle:t.arrowStyle||{}}).arrowStyle={background:t.arrowStyle.background?t.arrowStyle.background:t.theme!==undefined&&"dark"===t.theme?"rgb(128, 203, 196)":"blue",color:t.arrowStyle.color||"#fff"};var r=this.resolver.resolveComponentFactory(o),n=this.container.createComponent(r);n.instance.subject=new i.Subject,n.instance._ref=n,n.instance.appRef=this.appRef,n.instance.timerElement="",n.instance.config=t,n.instance.activeModal=!0,n.instance.isPopup=!1,n.instance.ParseStringToTime(t.time),n.instance.subject.asObservable().subscribe(function(t){e.timeSelected.emit(t)})},e}();c.decorators=[{type:t.Component,args:[{selector:"atp-time-picker",template:"\n    <div #container></div>\n  ",styles:["\n    .atp-time-picker .icon-container {\n      display: inline-block;\n      margin-right: .2em; }\n      .atp-time-picker .icon-container svg {\n        cursor: pointer;\n        position: relative;\n        top: .5em; }\n      .atp-time-picker .icon-container /deep/ i {\n        cursor: pointer; }\n  "]}]}],c.ctorParameters=function(){return[{type:t.ComponentFactoryResolver},{type:t.ApplicationRef}]},c.propDecorators={container:[{type:t.ViewChild,args:["container",{read:t.ViewContainerRef}]}],timeSelected:[{type:t.Output}]};var p=new Intl.NumberFormat("ar-AE"),a=new Intl.NumberFormat("fa-IR"),s={hour:function(e){return a.format(e)},minute:function(e){var t=a.format(e);return 1===t.length&&(t="۰"+t),t},separator:":",period:function(e){return"AM"===e?"صبح":"عصر"},clockHour:function(e){return a.format(e)},clockMinute:function(e){return a.format(e)},labels:{ok:"تایید",cancel:"لغو"}},m={hour:function(e){return p.format(e)},minute:function(e){var t=p.format(e);return 1===t.length&&(t="۰"+t),t},separator:":",period:function(e){return"AM"===e?"صباحا":"مساء"},clockHour:function(e){return p.format(e)},clockMinute:function(e){return p.format(e)},labels:{ok:"حسنا",cancel:"إلغاء"}},l={hour:function(e){return e},minute:function(e){var t=e;return 1===t.length&&(t="۰"+t),t},separator:":",period:function(e){return"AM"===e?"上午":"下午"},clockHour:function(e){return e},clockMinute:function(e){return e},labels:{ok:"好",cancel:"取消"}},u=function(){function e(e,t,r){this.resolver=e,this.appRef=t,this.injector=r}return e.prototype.open=function(e){(e={time:(e=e||{}).time||"00:00",theme:["light","dark"].indexOf(e.theme)>0?e.theme:"light",rangeTime:e.rangeTime||{start:"0:0",end:"24:0"},arrowStyle:e.arrowStyle||{},locale:e.locale||"en",preference:e.preference||null}).rangeTime={start:e.rangeTime.start||"0:0",end:e.rangeTime.end||"24:0"},e.arrowStyle={background:e.arrowStyle.background?e.arrowStyle.background:e.theme!==undefined&&"dark"===e.theme?"rgb(128, 203, 196)":"blue",color:e.arrowStyle.color||"#fff"};var t=this.resolver.resolveComponentFactory(o).create(this.injector);this.appRef.attachView(t.hostView);var r=t.hostView.rootNodes[0];return document.body.appendChild(r),t.instance.subject=new i.Subject,t.instance._ref=t,t.instance.appRef=this.appRef,t.instance.timerElement="",t.instance.config=e,e.preference?t.instance.preference=e.preference:t.instance.preference=function(e){switch(e){case"fa":return s;case"ar":return m;case"ch":return l;default:return null}}(e.locale),t.instance.ParseStringToTime(e.time),{afterClose:function(){return t.instance.subject.asObservable()}}},e}();u.decorators=[{type:t.Injectable}],u.ctorParameters=function(){return[{type:t.ComponentFactoryResolver},{type:t.ApplicationRef},{type:t.Injector}]};var k=function(){function e(e,r){this.viewContainerRef=e,this.atp=r,this.myClick=new t.EventEmitter}return e.prototype.onClick=function(e){var t=this.viewContainerRef.element.nativeElement,r=t.value,i=t.getAttribute("theme"),n=t.getAttribute("start"),o=t.getAttribute("end"),c=t.getAttribute("locale")||"en",p=t.getAttribute("preference")||null,a=t.getAttribute("arrowStyle");a=a?JSON.parse(a.replace(new RegExp("'","g"),'"')):"";this.atp.open({time:r,theme:i,rangeTime:{start:n,end:o},arrowStyle:a,locale:c,preference:p}).afterClose().subscribe(function(e){t.value=e})},e}();k.decorators=[{type:t.Directive,args:[{selector:"input[atp-time-picker]"}]}],k.ctorParameters=function(){return[{type:t.ViewContainerRef},{type:u}]},k.propDecorators={myClick:[{type:t.Output}],onClick:[{type:t.HostListener,args:["click",["$event"]]}]};var d=function(){return function(){}}();d.decorators=[{type:t.NgModule,args:[{imports:[r.CommonModule],declarations:[o,c,k],providers:[u,n],entryComponents:[o],exports:[o,c,k]}]}],d.ctorParameters=function(){return[]},e.AmazingTimePickerModule=d,e.AmazingTimePickerService=u,e.ɵb=n,e.ɵc=c,e.ɵd=k,e.ɵa=o,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=amazing-time-picker.umd.min.js.map
